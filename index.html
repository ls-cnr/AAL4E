<h1>Personalization Goals</h1>
<p>This section reports the personalization goals that we identified/used for the assistance scenario.</p>

<h2>Personalization Goal Format</h2>
<ul>
  <li><strong>Name:</strong> a unique reference to the personalization goal</li>
  <li><strong>Parameters:</strong> arguments to specify for instantiating the personalization goal (optional arguments are 
specified by an *)</li>
  <li><strong>Description:</strong> informal explanation of the kind of result</li>
  <li><strong>Example:</strong> possible instances of the personalization goal</li>
  <li><strong>Local/Global Transform functions:</strong>Pseudococe for the local and global transformation functions that the workflow adapter component will use for applyting the goal.</li>
  <li><strong>ATL:</strong> the same transformation formalized by using ATL, i.e, the Atlas Transformation Language</li>
</ul>



<h2>Template Repository</h2>

<h3>Explicit Starting Time</h3>
<h4>Parameters:</h4>
<p>
<ul>
  <li>target_goal = “C_G”</li>
  <li>time_condition = “time”</li>
 </ul>
</p>

<h4>Description:</h4>
<p>The activity related to the target goal will start exactly when the time condition holds.
Examples: Explicit Starting Time (every day at 3 pm)</p>

<h4>Local Trasform function:</h4>

<pre style="font-family: Courier;">
  <code>
IDENTIFY the start node of C_G
IF the start node is a Start Event, then REPLACE it with a Timer Event (with the specified time parameter)
IF the start node is a Timer/Condition event, then REPLACE it with a complex event that contains the previous event and the new timer event.
IF there is not a start node, then CREATE a Timer Event and LINK it with the first node of the workflow
  </code>
</pre>

<h4>Global Trasform function:</h4>
<p>no</p>

<h4>ATL:</h4>
<pre style="font-family: Courier;">
<code>
module ExplicitStartingTimeLocalTransformation;
create OUT : BPMN from IN : BPMN;

-- Helper to identify the start node
helper context BPMN!Node def: isStartNode() : Boolean =
    self.oclIsTypeOf(BPMN!StartEvent);

-- Helper to create a Timer Event
helper def: createTimerEvent(time : String) : BPMN!TimerEvent =
    let timerEvent : BPMN!TimerEvent = BPMN!TimerEvent.createInstance() in
        timerEvent.time <- time;
        timerEvent;

-- Main rule
rule TransformStartNode {
    from
        s : BPMN!Node (s.isStartNode())
    to
        t : BPMN!Event (
            if s.oclIsTypeOf(BPMN!StartEvent) then
                -- Replace with a Timer Event
                thisModule.createTimerEvent('time')
            else if s.oclIsTypeOf(BPMN!TimerEvent) or s.oclIsTypeOf(BPMN!ConditionEvent) then
                -- Replace with a complex event
                let complexEvent : BPMN!ComplexEvent = BPMN!ComplexEvent.createInstance() in
                    complexEvent.events <- Sequence{s, thisModule.createTimerEvent('time')};
                    complexEvent
            else
                -- Create a Timer Event and link it with the first node
                let timerEvent : BPMN!TimerEvent = thisModule.createTimerEvent('time') in
                    timerEvent.next <- s;
                    timerEvent
            endif
        )
}
</pre> 

 

 <h3>Explicit Starting Event</h3>
<h4>Parameters:</h4>
<p>
<ul>
   <li>target_goal = "C_G"</li>
   <li>event_condition = "condition"</li>
   <li>proactive: true | false (optional)</li>
</ul>
</p>

<h4>Description:</h4>
<p>The activity related to the target goal will start exactly when the event condition holds. If the proactive parameter is 
not specified, it means the context manager will generate the event. Otherwise, the workflow will raise the event; a specified 
sub-goal will be added to the abstract workflow to detect the specified conditions proactively.</p>

<p>Examples: Explicit Starting Event (the user is bored)</p>

<h4>Local Trasform function:</h4>
<p>
IDENTIFY the start node of C_G
IF the start node is a Start Event, then REPLACE it with a Conditional Event (with the specified “condition” parameter)
IF the start node is a Timer/Condition event, then REPLACE it with a Complex Event that merges the previous event and the new 
conditional event.
IF there is not a start node, then CREATE a Conditional Event and then create a SequenceFlow from the event to the first node 
of the workflow
</p>

<h4>Global Trasform function:</h4>
<p>no</p>

<h4>ATL:</h4>
<pre style="font-family: Courier;">
<code>
module ExplicitStartingEventLocalTransformation;
create OUT : BPMN from IN : BPMN;

-- Helper to identify the start node
helper context BPMN!Node def: isStartNode() : Boolean =
    self.oclIsTypeOf(BPMN!StartEvent);

-- Helper to create a Conditional Event
helper def: createConditionalEvent(condition : String) : BPMN!ConditionalEvent =
    let conditionalEvent : BPMN!ConditionalEvent = BPMN!ConditionalEvent.createInstance() in
        conditionalEvent.condition &lt;- condition;
        conditionalEvent;

-- Main rule
rule TransformStartNode {
    from
        s : BPMN!Node (s.isStartNode())
    to
        t : BPMN!Event (
            if s.oclIsTypeOf(BPMN!StartEvent) then
                 -- Replace with a Conditional Event
                thisModule.createConditionalEvent('condition')
            else if s.oclIsTypeOf(BPMN!TimerEvent) or s.oclIsTypeOf(BPMN!ConditionEvent) then
                 -- Replace with a complex event
                let complexEvent : BPMN!ComplexEvent = BPMN!ComplexEvent.createInstance() in
                    complexEvent.events &lt;- Sequence{s, thisModule.createConditionalEvent('condition')};
                    complexEvent
            else
                 -- Create a Conditional Event and link it with the first node
                let conditionalEvent : BPMN!ConditionalEvent = thisModule.createConditionalEvent('condition') in
                    conditionalEvent.next &lt;- s;
                    conditionalEvent
            endif
        )
}
</code>
</pre>



                      
